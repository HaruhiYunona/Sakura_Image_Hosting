**这个图床是写给我朋友的论坛的。因为看起来蛮简洁好用所以分享给大家**

#### 本图床有以下优点

> 1.带有md5查重，可以极大节省服务器空间
>
> 2.exif真图像检查，防止假图片炸服
>
> 3.自带各种复制功能，方便快捷
>
> 4.仅一个页面，上传，提取直连一气呵成
>
> 5.修改安装简单
>
> 6.设计精美，动态背景
>
> 7.支持移动端和PC端。多端可用



### 一、安装方法

**该教程内容所有指令都为`Linux CentOS 7.x`环境下指令,其他平台请您自行查询(⊙x⊙;)**



#### 1.下载该文件包

用git或者直接下载zip再上传都行。没有好讲的



#### 2.改写配置文件

本图床根目录下有一个`config`文件夹，里面有两个配置文件。

##### 1）config.js

```javascript
  config['name'] = "这里填你的图床名称"; //站点名称

  config['limit'] = 10485760; //上传图片最大字元数，即B。默认10MB（10485760B）

  config['site'] = "https://domain.com/pic"; //图片直连提供的文件位置，不包含文件名。比如你上传后的文件叫123.png。上传后直连就是https://domain.com/pic/123.png
```

##### 2）config.php

```php
  "servername" => "localhost",    //数据库服务器地址

  "username" => "username",      //数据库用户名

  "password" => "password",      //数据库密码

  "dbname" => "dbname",        //数据库名

  "port" => "3306",          //数据库端口

  "floder" => "./pic",        //上传图片存储文件夹

  "tmp_floder" =>"./tmp",   //缓存文件夹（此文件夹常年是空的但必须有，因为上传后会产生一定的缓存，上传完成后会自动删除）

  "sizeLimt" => "10485760"      //文件大小限制
```

改写完配置文件后，请注意安装一下`exif扩展`哦



#### 3.安装exif扩展

1.如果您使用宝塔面板，在您的PHP程序管理里应该能看到一个安装扩展。找到exif直接安装就完成了。

2.如果您没有exif扩展也没有面板，请自行百度或者google内容 【php的exif扩展如何安装】、



#### 4.录入数据表

本图床根目录下有一个pics.sql数据表，请按照以下`shell命令`使用。打开shell命令行

```shell
mysql -u 数据库用户名 -p
Enter password:
```

输入数据库密码后命令行 会变成  `mysql>` 格式，输入

```sql
mysql>use 数据库名
mysql>source ./pics.sql 
```

即可导入数据表。



#### 5.调整流量限制

**注意！！重中之重**

该图床采用的是POST+BASE64方式传图，部分服务器有对POST请求做出流量限制。

在宝塔面板的网站设置里可以调整流量限制，调到你设置的请求最大流量大1MB即可（比如你要求的最大上传图片是10MB，那么你调整为11MB即可）。

如果没有宝塔请自行查询如何调整服务器https请求流量限制。



至此安装过程就完成了



### 二、文件清单

| 文件位置               | 文件分类     | 用途                                                         |
| ---------------------- | ------------ | ------------------------------------------------------------ |
| ./index.html           | 核心文件     | 唯一的给客户看的页面。里面有上传，复制链接和樱花飘舞等前端JS代码内容 |
| ./upload.php           | 核心文件     | 上传的后端判断。查重，存储和反馈给前端的代码都在这           |
| ./pics.sql             | 数据库脚本   | 导入后可以创建一个查重用的数据表                             |
| ./README.MD            | 说明书       | 就是目前的文件。教你怎么用                                   |
| ./tmp                  | 缓存文件夹   | 缓存上传的图片进行查重和安全检查                             |
| ./pic                  | 图片文件夹   | 上传的图片都在这里                                           |
| ./config               | 配置文件夹   | 配置文件都在这里                                             |
| ./img                  | 图标文件夹   | 本图床所用到的图标                                           |
| ./js/jquery.js         | jquery源文件 | 重要的运行库文件，丢了的话前端暴毙                           |
| ./js/sweetalert.min.js | 弹窗工具的JS | 弹窗所需要的脚本                                             |
| ./js/script.js         | 函数文件     | 本图床所用的js自定义函数都在这里                             |
| ./css/sweetalert.css   | 弹窗工具CSS  | 弹窗所需要的样式表                                           |
| ./css/style.css        | 样式表       | 本图床所用样式表                                             |



### 三、预览图

![](https://mdzz.pro/picup/1.png)

![](https://mdzz.pro/picup/2.png)

![](https://mdzz.pro/picup/3.png)
